#textdomain wesnoth-To_Lands_Unknown
[scenario]

  id=14_Far_North
  next_scenario=15_Gates_of_Kharos
  name= _  "Far North"
  map_data="{~add-ons/To_Lands_Unknown/maps/14_Far_North.map}"
  turns=-1
  victory_when_enemies_defeated=no
 
  {DEFAULT_SCHEDULE}
  {SCENARIO_MUSIC heroes_rite.ogg}
  
[story]
    [part]
        story= _ "The mysterious stranger was in a critical state. He had wandered through the desert for a month. He had no water on him, astonishing everybody. One thing was sure - the stranger wasn't from Al-Kajima. It was evident from his exotic garb. After the arrival to Tar-Tabar, the newcomer was taken to a hospital to be taken care of. Everybody was waiting for him to awake and to find out who he was and what he wanted."
    [/part]
    [part]
        story= _ "After three days the wanderer regained consciousness. It turned out that his name is Atiros, and he had come from a land which was abandoned by the Summoners thousands of years ago. These words shocked the Highest Council, because the ancient scrolls haven't mentioned other people outside the desert. For centuries the Summoners have thought that their ancestors set out to the Great Desert without leaving anyone on the Ancestral Lands. Atiros said, that that land is now called Kharos and it is in grave danger."
    [/part]
    [part]
        story= _ "According to what he said, about half a year ago the Kharosans had had lost contact with all of their furthest locals on the east. Messengers had never returned. When more towns have started to disappear, the ruler of Kharos, the Highest Priest of Light, Anthi, had ordered to the middle-lands fortified in order to beat off possible attacks by those invisible invaders. After one month contact has been lost again, but this time, two cavalry archers managed to escape to the west. From their reports it was understood that they were attacked by masked beings, full of madness and anger. Terrifying three-headed creatures from the worst nightmares served them..."
    [/part]
    [part]
        story= _ "These words have intrigued Mehir, who noticed similarities between what Atiros told, and the siege of Mag-Magar. The newcomer continued. When the fall of the middle-lands was certain, Anthi realized that the Kharosan army can't defeat such a powerful enemy. But there was a hope in one of their... legends, which told a story about their legendary siblings who abandoned their homeland and set out to the desert. Anthi had no choice and decided to trust  that tale, hoping it is true and the citizens of the desert will return to protect the Ancestral Lands, their first home."
    [/part]
    [part]
        story= _ "Atiros, as one of the two most powerful warriors of Kharos, had been ordered to find them. First, he had set out to Acacia Forest to find magical fount of the Water of Life, which had helped him to travel safely through the desert. He had managed to acquire some of this wonderful liquid just in time before the forest had been seized by the dark hordes. Next, he had set out to the furthest city of the south, Saffaros, and sailed across the sea to the Great Desert. Right after landing, he saw a giant tower looming over the horizon. He decided to go in that direction, thinking he would find civilization there. Atiros had seen the highest tower of Al-Kamija, whose peak can be seen everywhere on the continent. After five weeks, the Water of Life had run out. In the following week, Atiros had seen a beautiful canopy over dunes. Soon he had lost his consciousness and have woken in Tar-Tabar, where he had found those that he was ordered to find."
    [/part]
    [part]
        story= _ "All of that story was an unusual experience for the Summoners, and it caused many troubles. In the next few months, the circle will be ready and then their whole country will disappear from this world. The protection of the circle at this stage had higher priority, so interfering in foreign wars was unthinkable. Mehir, despite the Highest Council's recommendations, decided to set out to Kharos as Atiros has requested. After one week, the expedition was ready to move out. Before a part of army left Tar-Tabar, the Council gave Mehir a letter to the people of Kharos - an an invitation to the Abyss, as the Elders thought that it would be a nice gesture, which might be the last chance of survival in case that everything was be lost. Mehir took the letter, appointed his deputy, and with some volunteers and Atiros set out to the Ancestral Lands"
    [/part]
    [part]
        show_title=yes
        background=story/map-m14.jpg
        {NEW_JOURNEY 316 325}
        {NEW_JOURNEY 309 303}
        {NEW_JOURNEY 300 279}
        {NEW_JOURNEY 293 257}
        {NEW_JOURNEY 284 235}
        {NEW_JOURNEY 274 216}
        {NEW_JOURNEY 269 194}
        {NEW_JOURNEY 279 177}
        {NEW_JOURNEY 269 159}
    [/part]
[/story]

[side]
    side=1
    controller=human
    team_name=mehirteam
    user_team_name= _ "Mehir"

    type=I8 Ak_SummonerIII
    id=Mehir
    name= _ "Mehir"
    unrenamable=yes
    canrecruit=yes

    recruit=I8 Ak_Summoner,I8 Ak_CamelRider,I8 Ak_CarpetRider,I8 Ak_Elemental_water,I8 Ak_SummonerII,I8 Ak_Rhami,I8 Ak_Elemental_fire,I8 Ak_Dispeller

    {GOLD 1500 1000 500}
    {INCOME 10 5 2}
    
    {UNIT 1 (I8 Kharos_SunMasterofsun) () () (placement=leader
    id=Atiros
    {IS_HERO}
    name=Atiros)}
[/side]

[side]
    side=2
    controller=ai
    team_name=mehirteam
    user_team_name= _ "Kharos"

    type=I8 Kharos_SunPlatinumwarrior
    id=Dedylos
    name= _ "Dedylos"
    unrenamable=yes
    canrecruit=yes
    colour=white

    recruit=I8 Kharos_SunWhitewarrior,I8 Kharos_SunProtector,I8 Kharos_SunBrownwarrior,I8 Kharos_SunShielder,I8 Kharos_SunCavalryArcher,I8 Kharos_SunFollower
    
    [ai]
        aggression=0.2
        grouping=defensive
        passive_leader=yes
        #passive_leader_shares_keep=yes
        support_villages=yes
    [/ai]
    {GOLD 400 300 200}
    {INCOME 10 5 2}
[/side]

[side]
    side=3
    controller=ai
    team_name=tharis
    user_team_name= _ "Hydras"
    no_leader=yes
    colour=black
    
    [ai]
        aggression=1.0
    [/ai]

    {GOLD 400 300 200}
    {INCOME 2 5 10}
[/side]

[side]
    side=4
    controller=ai
    team_name=tharis
    user_team_name= _ "Invaders"
    no_leader=yes
    colour=purple

    recruit=I8 Tharis_Disciple,I8 Tharis_Witch,I8 Tharis_Darkwarrior,I8 Tharis_Hydra,I8 Tharis_Hunter,I8 Vampire Bat,I8 Blood Bat,I8 Tharis_Bladedancer,I8 Tharis_Darkwizard,I8 Tharis_Shadowwitch,I8 Tharis_Commander,I8 Tharis_Slayer,I8 Tharis_Deephydra,I8 Tharis_GreatHunter,I8 Tharis_Assassin,I8 Tharis_Sworddancer
    
	[ai]
	   #recruitment_pattern=archer,archer,fighter,mixed fighter,mixed fighter,scout
	   aggression=1.0
	[/ai]

    {GOLD 700 1000 1000}
    {INCOME 2 5 10}
[/side]

{STARTING_VILLAGES_ALL 2}

[event]
    name=prestart
    {PLACE_IMAGE "units/transport/transport-galleon.png" 43 39}
    {PLACE_IMAGE "units/transport/transport-galleon.png" 44 38}
    {PLACE_IMAGE "units/transport/transport-galleon.png" 45 37}
    {RECALL_OR_CREATE_UNIT (
id=Rashti
name= _ "Rashti"
type=I8 Ak_Rashti
{IS_HERO}
) Rashti}

    #gold reducing script
    [store_unit]
        [filter]
            x,y=recall,recall
            level=3,4
        [/filter]
        variable=units
    [/store_unit]
    {VARIABLE gold_var 30}
    {VARIABLE_OP gold_var multiply $units.length}
    {VARIABLE_OP gold_var multiply -1}
    
    [gold]
        amount=$gold_var
        side=1
    [/gold]
    
    #landing
    
    [kill]
        id=Banisher
        animate=no
    [/kill]
    {VARIABLE turn_hydras 99}
    {VARIABLE menu 1}
    {VARIABLE rain_sound 1}
    {VARIABLE lightnings 1}
    
    #####
    [set_menu_item]
	id=control_lightning
	description= _ "turn on/off lightnings"
	[show_if]
	[variable]
	   name=menu
	   equals=1
	[/variable]
	[/show_if]

	[filter_location]
	[/filter_location]
	[command]
	    [if]
	       [variable]
	           name=lightnings
	           equals=1
	       [/variable]
	       [then]
	           {VARIABLE lightnings 0}
	       [/then]
	       [else]
	           {VARIABLE lightnings 1}
	       [/else]
	    [/if]
	[/command]
    [/set_menu_item]
    
    ##
    [set_menu_item]
	id=control_rain
	description= _ "turn on/off rain sound"
	[show_if]
	[variable]
	   name=menu
	   equals=1
	[/variable]
	[/show_if]

	[filter_location]
	[/filter_location]
	[command]
	    [if]
	       [variable]
	           name=rain_sound
	           equals=1
	       [/variable]
	       [then]
	           {VARIABLE rain_sound 0}
	           [remove_sound_source]
                    id=rain
               [/remove_sound_source]
	       [/then]
	       [else]
	           {VARIABLE rain_sound 1}
	           [sound_source]
                id=rain
                x,y=30,30
                sounds="rain.wav"
                delay=0
                chance=100
                full_range=35
                loop=-1
                [/sound_source]
	       [/else]
	    [/if]
	[/command]
[/set_menu_item]
[/event]

[event]
    name=start
    [message]
            speaker=narrator
            #image="wesnoth-icon.png"
            message= _ "This mission has special effects in form of rainy weather, which may slow down performance in older computers."
            [option]
                message= _ "Load rain"
                [command]
                    [endlevel]
                        result=victory    
                        next_scenario=14_Far_North_rain       
                        linger_mode=no
                        carryover_report=no
                        carryover_percentage=100       
                    [/endlevel]
                [/command]
            [/option]
            [option]
                message= _ "Continue without rain"
                [command]
                [/command]
            [/option]
    [/message]
    [message]
            speaker=narrator
            #image="wesnoth-icon.png"
            message= _ "You can always turn on/off some weather effects. To do that right-click anywhere on the map and choose, which effects you want to disable or enable."
    [/message]
[/event]
[event]
    name=turn 1
    [message]
            speaker=Mehir
            #image="wesnoth-icon.png"
            message= _ "What a warm welcome for a return after a thousand years..."
    [/message]
    [message]
            speaker=Atiros
            #image="wesnoth-icon.png"
            message= _ "Pardon, Mehir, but we are on the border of two different climate zones and storms are a common phenomenon here."
    [/message]
    [message]
            speaker=Mehir
            #image="wesnoth-icon.png"
            message= _ "It's the first time I have seen water falling from the sky. Something like that could be very useful on our desert."
    [/message]
    [message]
            speaker=Atiros
            #image="wesnoth-icon.png"
            message= _ "Let's not waste time. Saffaros is in front of us. Follow me."
    [/message]
    
    {MOVE_UNIT id=Atiros 36 35}
    {MOVE_UNIT id=Mehir 37 35}
    {MOVE_UNIT id=Rashti 37 36}
    
    [message]
        speaker=Dedylos
        #image="wesnoth-icon.png"
        message= _ "I can see someone in the distance..."
    [/message]
    [message]
            speaker=Atiros
            #image="wesnoth-icon.png"
            message= _ "Hello, Dedylos. Look who is coming with me!"
    [/message]
    [message]
            speaker=Dedylos
            #image="wesnoth-icon.png"
            message= _ "I can't believe my own eyes. Anthi knew who should be chosen for this suicidal mission. You're our hero, Atiros."
    [/message]
    [message]
            speaker=Atiros
            #image="wesnoth-icon.png"
            message= _ "There's no time for idle chat. Please, meet Mehir, the leader of Summoners of Tar-Tabar. He was the only one who had decided to help us in our plight."
    [/message]
    [message]
            speaker=Dedylos
            #image="wesnoth-icon.png"
            message= _ "Welcome, stranger. Your help is a matter of life and death; we can't defeat them alone."
    [/message]
    [message]
            speaker=Mehir
            #image="wesnoth-icon.png"
            message= _ "Wel-met, Dedylos. As it happened, I fought this enemy and I have valuable experience which can be very useful to us all."
    [/message]
    [message]
            speaker=Dedylos
            #image="wesnoth-icon.png"
            message= _ "That's great. We were looking for someone like you. I will send a messenger to Kharos to announce the amazing news, and in the meantime, I invite you to my castle, where we should discuss our next steps."
    [/message]
    
    {FADE_TO_BLACK}
    [store_unit]
        [filter]
            side=1
            [not]
                x,y=recall,recall
            [/not]
        [/filter]
        variable=position
        kill=yes
    [/store_unit]
    {FOREACH position i}
    [unstore_unit]
        variable=position[$i]
        find_vacant=yes
        x,y=30,30
    [/unstore_unit]
    {NEXT i}
    {CLEAR_VARIABLE position}
    
    [store_unit]
        [filter]
            type=I8 Ak_SummonerIII_lock
            x,y=recall,recall
        [/filter]
        variable=landing
    [/store_unit]
    {FOREACH landing i}
        {VARIABLE landing[$i].advances_to (I8 Ak_SummonerIV)}
        [unstore_unit]
            variable=landing[$i]
            find_vacant=no
        [/unstore_unit]
    {NEXT i}
    
    {CLEAR_VARIABLE landing}
    {FADE_IN}
    [message]
            speaker=narrator
            #image="wesnoth-icon.png"
            message= _ "Two hours later..."
    [/message]
    [message]
            speaker=Dedylos
            #image="wesnoth-icon.png"
            message= _ "The dark armies have captured all of the cities of the middle-lands; we had to evacuate all of our citizens that live there, and now they're behind the thick walls of Kharos. The only exception is Saffaros, for we hope to escape to the desert by its port if the capital falls."
    [/message]
    [message]
            speaker=Atiros
            #image="wesnoth-icon.png"
            message= _ "So only two cities remained..."
    [/message]
    
    {REPLACE_SCENARIO_MUSIC siege_of_laurelmor.ogg}
    {UNIT 2 (I8 Kharos_SunCavalryArcher) 51 22 (id=Rider2
    generate_name=yes)}
    {MOVE_UNIT id=Rider2 46 28}
    [message]
            speaker=Rider2
            #image="wesnoth-icon.png"
            message= _ "THEY'RE HERE!!! RUN!!!"
    [/message]
    [message]
            speaker=Dedylos
            #image="wesnoth-icon.png"
            message= _ "But... how is it possible? They had to come from the north!"
    [/message]
    {UNIT 2 (I8 Kharos_SunCavalryArcher) 23 17 (id=Rider3
    generate_name=yes)}
    {MOVE_UNIT id=Rider3 24 19}
    [message]
            speaker=Rider3
            #image="wesnoth-icon.png"
            message= _ "Enemy on the horizon!!! They have seized Degos!!!"
    [/message]
    [message]
            speaker=Dedylos
            #image="wesnoth-icon.png"
            message= _ "Does it mean..."
    [/message]
    [message]
            speaker=Atiros
            #image="wesnoth-icon.png"
            message= _ "And what about Kharos? Have they destroyed Kharos?"
    [/message]
    [message]
            speaker=Rider3
            #image="wesnoth-icon.png"
            message= _ "No! Their main strike force is  regrouping to the east!!!"
    [/message]
    [message]
            speaker=Dedylos
            #image="wesnoth-icon.png"
            message= _ "Thank the sun, for Kharos is untouched, for now. So they must be scouts. We must defend Saffaros. Mehir, will you help us?"
    [/message]
    [message]
            speaker=Mehir
            #image="wesnoth-icon.png"
            message= _ "You'll defend the town and I will try to prepare a counterattack."
    [/message]
    {UNIT 4 (I8 Tharis_Greatwarlock) () () (placement=leader
    canrecruit=yes
    generate_name=yes)}
    {VARIABLE turn_hydras $turn_number}
    [objectives]
      side=1
      [objective]
        description= _ "Defeat all enemies"
        condition=win
      [/objective]
      [objective]
        description= _ "Death of Mehir"
        condition=lose
      [/objective]
      [objective]
        description= _ "Death of Rashti"
        condition=lose
      [/objective]
      [objective]
        description= _ "Death of Atiros"
        condition=lose
      [/objective]
      [objective]
        description= _ "Death of Dedylos"
        condition=lose
      [/objective]
    [/objectives]
[/event]

#ai_guardian event
[event]
    name=side 2 turn
    first_time_only=no
    [store_unit]
        [filter]
            side=2
            [not]
            [filter_location]
                terrain=Ce,Ch,Cv,Cud,Chr,Chw,Chs,Ke,Kh,Kv,Kud,Khr,Khw,Khs
            [/filter_location]
            [/not]
        [/filter]
        variable=guards
    [/store_unit]
    {FOREACH guards i}
        {VARIABLE guards[$i].ai_special guardian}
        [unstore_unit]
            variable=guards[$i]
            find_vacant=no
        [/unstore_unit]
    {NEXT i}
[/event]

#Hydra waves event
[event]
    name=side 3 turn
    first_time_only=no
    [if]
    [variable]
        name=turn_number
        less_than_equal_to=12
    [/variable]
    [and]
    [variable]
        name=turn_number
        greater_than_equal_to=$turn_hydras
    [/variable]
    [/and]
    [then]
        #{RANDOM 0..2}
        #{REPEAT $random (
        #{UNIT 3 (I8 Tharis_Chaoshydra) 54 18 ()}
        #)}
        #{RANDOM 0..2}
        #{REPEAT $random (
        #{UNIT 3 (I8 Tharis_Deephydra) 54 18 ()}
        #)}
        #{RANDOM 0..2}
        #{REPEAT $random (
        #{UNIT 3 (I8 Tharis_Hydra) 54 18 ()}
        #)}
        
        {RANDOM 0..2}
        {REPEAT $random (
        {UNIT 3 (I8 Tharis_Chaoshydra) 50 15 ()}
        )}
        {RANDOM 0..2}
        {REPEAT $random (
        {UNIT 3 (I8 Tharis_Deephydra) 50 15 ()}
        )}
        {RANDOM 0..2}
        {REPEAT $random (
        {UNIT 3 (I8 Tharis_Hydra) 50 15 ()}
        )}
    [/then]
    [/if]
[/event]

[event]
    name=attack
    [filter_second]
        type=I8 Tharis_Hydra,I8 Tharis_Deephydra,I8 Tharis_Chaoshydra
        side=3
    [/filter_second]
    [message]
            speaker=Dedylos
            #image="wesnoth-icon.png"
            message= _ "These monsters seem to rise to the surface in that swamp. I hope there won't be too many of them or we will never make it."
    [/message]
[/event]

[event]
    name=new turn
    first_time_only=no
    
    {VARIABLE timer $turn_number}
    {VARIABLE_OP timer sub $turn_hydras}
        [if]
        [variable]
            name=timer
            equals=2
        [/variable]
        [then]
            [if]
            [have_unit]
                side=1
                type=I8 Ak_Jinn_Great
            [/have_unit]
            [then]
                [fire_event]
                    name=jinn_event
                [/fire_event]
            [/then]
            [else]
                [message]
                    speaker=Mehir
                    #image="wesnoth-icon.png"
                    message= _ "If I had a Wonderful Jinn, he could've created a new, larger keep for me and strengthen the city walls..."
                [/message]
                [objectives]
                    side=1
                    [objective]
                        description= _ "Defeat all enemies"
                        condition=win
                    [/objective]
                    [objective]
                        description= _ "(optional) advance a Jinn to a Wonderful Jinn"
                        condition=win
                    [/objective]
                    [objective]
                        description= _ "Death of Mehir"
                        condition=lose
                    [/objective]
                    [objective]
                        description= _ "Death of Rashti"
                        condition=lose
                    [/objective]
                    [objective]
                        description= _ "Death of Atiros"
                        condition=lose
                    [/objective]
                    [objective]
                        description= _ "Death of Dedylos"
                        condition=lose
                    [/objective]
                [/objectives]
            [/else]
            [/if]
        [/then]
    [/if]
[/event]

[event]
    name=post advance
    [filter]
        side=1
        type=I8 Ak_Jinn_Wonderful
    [/filter]
    [fire_event]
        name=jinn_event
    [/fire_event]
[/event]

[event]
    name=jinn_event
    first_time_only=yes
    [message]
            speaker=Mehir
            #image="wesnoth-icon.png"
            message= _ "Wonderful Jinn, I order you to create a new keep in this town!"
    [/message]
    [message]
            speaker=unit
            #image="wesnoth-icon.png"
            message= _ "As you wish, Master."
    [/message]
    {FLASH_BLUE (
    {SCROLL_TO 30 30}
    {MODIFY_TERRAIN Cud (27,28,32,33,27,30,33,27,30,33) (27,26,26,27,29,27,29,32,33,32)}
    {MODIFY_TERRAIN Kud (30) (25)}
    )}
    [message]
            speaker=Dedylos
            #image="wesnoth-icon.png"
            message= _ "Amazing!"
    [/message]
[/event]

#victory condition
[event]
    name=die
    first_time_only=no
    [filter]
        side=3,4
    [/filter]
    
    [if]
    [have_unit]
        side=3,4
    [/have_unit]
    [else]
        [fire_event]
            name=victory_dialogue
        [/fire_event]
    [/else]
    [/if]
[/event]

[event]
    name=victory_dialogue
    [message]
            speaker=Dedylos
            #image="wesnoth-icon.png"
            message= _ "We did it! It's the first time we have defeated them!!! Thank you, Mehir!"
    [/message]
    [message]
            speaker=Mehir
            #image="wesnoth-icon.png"
            message= _ "I'm not surprised at all that your country is falling."
    [/message]
    [message]
            speaker=Dedylos
            #image="wesnoth-icon.png"
            message= _ "?!"
    [/message]
    [message]
            speaker=Mehir
            #image="wesnoth-icon.png"
            message= _ "Your armies consist of humans, who are very easy to kill. We, contrariwise, mainly use beings from the Abyss, which cannot be poisoned or eaten, which seem to be the favorite tactics of your enemies. You're lucky I've decided to help you."
    [/message]
    
    [endlevel]
            result=victory
    [/endlevel]
[/event]

[event]
    name=victory
    {VARIABLE menu 0}
[/event]
#weather
[event]
    name=moveto
    first_time_only=no
    [filter]
        side=1
    [/filter]
    [allow_undo]
    [/allow_undo]
    [if]
    [variable]
        name=lightnings
        equals=1
    [/variable]
    [then]
    {RANDOM 1..20}
    [switch]
        variable=random
        [case]
            value=1
            {COLOR_ADJUST 66 66 66}
            {COLOR_ADJUST 0 0 0}
            [sound]
                name="thunder1.wav"
            [/sound]
        [/case]
        [case]
            value=2
            {COLOR_ADJUST 33 33 33}
            {COLOR_ADJUST 0 0 0}
            {COLOR_ADJUST 33 33 33}
            {COLOR_ADJUST 0 0 0}
            [sound]
                name="thunder2.wav"
            [/sound]
        [/case]
        [case]
            value=3
            {COLOR_ADJUST 33 33 33}
            {COLOR_ADJUST 0 0 0}
            [sound]
                name="thunder3.wav"
            [/sound]
        [/case]
        [case]
            value=4
            {COLOR_ADJUST 100 100 100}
            {COLOR_ADJUST 33 33 33}
            {COLOR_ADJUST 0 0 0}
            {COLOR_ADJUST 66 66 66}
            {COLOR_ADJUST 0 0 0}
            [sound]
                name="thunder1.wav"
            [/sound]
        [/case]
        [case]
            value=5
            {COLOR_ADJUST 100 100 100}
            {COLOR_ADJUST 0 0 0}
            [sound]
                name="thunder2.wav"
            [/sound]
        [/case]
    [/switch]    
    {COLOR_ADJUST 0 0 0}
    [/then]
    [/if]
[/event]

[sound_source]
    id=rain
    x,y=30,30
    sounds="rain.wav"
    delay=0
    chance=100
    full_range=35
    loop=-1
[/sound_source]

#weather and elementals
[event]
    name=side 1 turn refresh
    first_time_only=no
    
    #fire
    [store_unit]
        [filter]
            type=I8 Ak_Elemental_fire,I8 Ak_Avatar_fire,I8 Ak_God_fire
        [/filter]
        variable=fire
    [/store_unit]
    {FOREACH fire i}
        {VARIABLE_OP fire[$i].hitpoints add -8}
        [if]
        [variable]
            name=fire[$i].hitpoints
            less_than_equal_to=0
        [/variable]
            [then]
                [kill]
                    x,y=$fire[$i].x,$fire[$i].y
                    animate=yes
                [/kill]
            [/then]
            [else]
                [unstore_unit]
                    variable=fire[$i]
                    find_vacant=no
                    text= _ "8"
                    {COLOR_HARM}
                [/unstore_unit]
            [/else]
        [/if]
    {NEXT i}
    {CLEAR_VARIABLE fire}
    
    #water
    [store_unit]
        [filter]
            type=I8 Ak_Elemental_water,I8 Ak_Avatar_water,I8 Ak_God_water
        [/filter]
        variable=water
    [/store_unit]
    {FOREACH water i}
    [if]
    [variable]
        name=water[$i].hitpoints
        equals=$water[$i].max_hitpoints
    [/variable]
    [else]
        {VARIABLE_OP water[$i].hitpoints add 8}
        [if]
        [variable]
            name=water[$i].hitpoints
            greater_than=$water[$i].max_hitpoints
        [/variable]
            [then]
                {VARIABLE water[$i].hitpoints $water[$i].max_hitpoints}
            [/then]
        [/if]
        [unstore_unit]
            variable=water[$i]
            find_vacant=no
            text= _ "8"
            {COLOR_HEAL}
        [/unstore_unit]
    [/else]
    [/if]
    {NEXT i}
    {CLEAR_VARIABLE water}
[/event]

{ITEM_APPLIER}
{COLLAR_EVENT}
{DEATH_MEHIR}
{DEATH_RASHTI}
{DEATH_ATIROS}
{DEATH_DEDYLOS}
{I8M14NORAIN_TERRAIN}
{I8M14_TERRAIN}
[/scenario]
